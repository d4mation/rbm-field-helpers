!function(a){"use strict";function b(){var b=a(".rbm-field-colorpicker");b.length&&b.each(function(){return a(this).data("rbm-colorpicker-init")?!0:(a(this).data("rbm-colorpicker-init",1),void a(this).find('input[type="text"]').wpColorPicker())})}a(b),a(document).on("rbm-repeater-add",b)}(jQuery),function(a){"use strict";a(function(){function b(){a(".rbm-field-datepicker").each(function(){a(this).data("rbm_datepicker_init")||a(this).find('input[type="text"]').datepicker(a(this).data()).data("rbm_datepicker_init",1)})}b(),a(document).on("rbm-repeater-add",b)})}(jQuery),function(a){"use strict";window.rbm_instantiate_media_uploaders=function(){var b,c;wp.media&&(b=wp.media.frames.meta_image_frame=wp.media({title:"Choose Media"}),b.on("select",function(){var a=b.state().get("selection").first().toJSON();switch(c.find(".media-id").val(a.id),c.find(".upload-media").hide(),c.find(".remove-media").show(),c.data("type")){case"image":c.find(".image-preview").attr("src",a.url);break;default:$uploader.find(".media-url").html(a.url)}}),a(document).on("click",".rbm-media-uploader .upload-media",function(d){d.preventDefault(),c=a(this).closest(".rbm-media-uploader");c.data("type");b.open()}),a(document).on("click",".rbm-media-uploader .remove-media",function(b){switch(a(this).siblings(".upload-media").show(),a(this).hide(),a(this).siblings(".media-id").val(""),c.data("type")){case"image":var d=a(this).siblings(".image-preview");d.attr("src",d.data("placeholder")||"");break;default:var e=a(this).siblings(".media-url");e.html(e.data("placeholder")||"&nbsp;")}c=!1}))},a(rbm_instantiate_media_uploaders)}(jQuery),function(a){"use strict";a(function(){function b(b){var c=b.find("select.rbm-select2");c.each(function(){var b=a(this).siblings(".select2-container");b.length&&b.remove(),a(this).show().select2()})}a(".rbm-field-repeater").each(function(){var c=a(this).find(".rbm-field-repeater-list"),d=c.data("repeater-list");a(this).repeater({show:function(){a(this).slideDown(),b(a(this)),a(document).trigger("rbm-repeater-add",[a(this)])},hide:function(){confirm("Are you sure you want to delete this element?")&&(a(this).slideUp(400,function(){a(this).remove()}),a(document).trigger("rbm-repeater-delete"))},isFirstItemUndeletable:!0}),c.sortable({axis:"y",handle:".rbm-field-repeater-handle",forcePlaceholderSize:!0,placeholder:"rbm-sortable-placeholder",update:function(b,e){c.find(".rbm-field-repeater-row").each(function(){a(this).find("input, select, textarea").filter('[name^="'+d+'"]').each(function(){var b=a(this).closest(".rbm-field-repeater-row").index(),c=a(this).attr("name"),e=new RegExp("("+d+"\\[)\\d(\\]\\[.*?\\])","i");a(this).attr("name",c.replace(e,"$1"+b+"$2"))})}),a(document).trigger("rbm-repeater-list-update",[e.item])}}),a(this).find(".rbm-field-repeater-row.dummy").remove()})})}(jQuery),function(a){"use strict";a(function(){function b(){a(".rbm-field-table").each(function(){var b=a(this).find("table");b.find("thead th").first().find("[data-table-delete-column]").prop("disabled",!0),b.find("tbody tr").first().find("[data-table-delete-row]").prop("disabled",!0),b.find("tbody").sortable({axis:"y",handle:".rbm-field-table-sort",update:c}),a(this).find("[data-table-create-row]").click(function(){var b=a(this).closest(".rbm-field-table").find("table"),d=b.find("tbody tr").first().clone(!0,!0);d.find("[data-table-delete-row]").prop("disabled",!1),d.find('input[type="text"]').val(""),b.find("tbody").append(d),c()}),a(this).find("[data-table-create-column]").click(function(){var b=a(this).closest(".rbm-field-table").find("table"),d=b.find("thead th").first().clone(!0,!0),e=b.find("tbody td").first().clone(!0,!0);d.find('input[type="text"]').val(""),d.find("[data-table-delete-column]").prop("disabled",!1),e.find('input[type="text"]').val(""),b.find("thead tr th:last-of-type").before(d),b.find("tbody tr td:last-of-type").before(e),c()}),a(this).find("[data-table-delete-row]").click(function(){a(this).closest("tr").remove(),c()}),a(this).find("[data-table-delete-column]").click(function(){var b=a(this).closest("table"),d=a(this).closest("th").index();b.find("th:nth-child("+(d+1)+")").remove(),b.find("td:nth-child("+(d+1)+")").remove(),c()})})}function c(){a(".rbm-field-table").each(function(){a(this).find("thead th").each(function(){if(a(this).hasClass("actions"))return!0;var b=a(this).index(),c=a(this).find('input[type="text"]').attr("name"),d="["+b+"]";a(this).find('input[type="text"]').attr("name",c.replace(/\[\d]/,d))}),a(this).find("tbody td").each(function(){if(a(this).hasClass("actions"))return 0===a(this).closest("tr").index()?a(this).find("[data-table-delete-row]").prop("disabled",!0):a(this).find("[data-table-delete-row]").prop("disabled",!1),!0;var b=a(this).closest("tr").index(),c=a(this).index(),d=a(this).find('input[type="text"]').attr("name"),e="["+b+"]["+c+"]";a(this).find('input[type="text"]').attr("name",d.replace(/\[\d]\[\d]/,e))})})}b(),a(document).on("rbm-repeater-add",b)})}(jQuery),function(a,b){"use strict";function c(){d(),l.length&&(r=l.data("post-id"),e())}function d(){l=a("#rbm-field-user-keys[data-init]"),l.length&&(m=l.find(".rbm-user-keys-container"),n=l.find("table.rbm-user-keys"),o=l.find("[data-user-key-add]"),q=l.find("[data-user-key-delete-all]"),p=l.find('[name="_rbm_new_user_email"]'))}function e(){o.click(f),l.on("click","[data-user-key-delete]",g),q.click(h),p.keypress(k)}function f(){var c=l.find('[name="_rbm_new_user_email"]').val(),d=l.find('.rbm-user-keys-input-error[data-input="_rbm_new_user_email"]');return c.length?(d.hide(),void a.post(ajaxurl,{action:b.userkeys_ajax_add_user_action,rbm_field_helpers_nonce:b.nonce,email:c,post_ID:r},function(a){"success"==a.status?(i(a.user_email,a.user_key,a.edit_link),p.val("")):"fail"==a.status&&a.error_msg&&alert(a.error_msg)})):void d.show()}function g(c){var d=a(this).data("email");c.preventDefault(),confirm("Are you sure you want to delete this user?")&&a.post(ajaxurl,{action:b.userkeys_ajax_delete_user_action,rbm_field_helpers_nonce:b.nonce,post_ID:r,email:d},function(a){"success"==a.status?j(a.user_email):"fail"==a.status&&a.error_msg&&alert(a.error_msg)})}function h(c){c.preventDefault(),confirm("Are you sure you want to delete ALL users?")&&a.post(ajaxurl,{action:b.userkeys_ajax_delete_users_action,rbm_field_helpers_nonce:b.nonce,post_ID:r},function(a){"success"==a.status?m.fadeOut(300,function(){n.find("tbody tr:not([data-template])").remove()}):"fail"==a.status&&a.error_msg&&alert(a.error_msg)})}function i(a,b,c){var d=n.find("tr[data-template]").clone();d.removeAttr("data-template"),d.attr("data-email",a),d.find("[data-user-email]").text(a),d.find("[data-user-link]").text(c).attr("href",c),d.find("[data-user-key-delete]").attr("data-email",a),n.find("tbody tr:not([data-template])").length||m.fadeIn(),n.find("tbody").append(d),d.fadeIn()}function j(b){n.find('tr[data-email="'+b+'"]').fadeOut(300,function(){a(this).remove(),n.find("tbody tr:not([data-template])").length||m.fadeOut()})}function k(a){"13"==a.charCode&&(a.preventDefault(),o.click())}var l,m,n,o,p,q,r;a(c)}(jQuery,RBM_FieldHelpers),function(a){"use strict";function b(b,c){var d=c.find(".rbm-field-wysiwyg");d.length&&d.each(function(){var b,c=a(this).find("textarea.wp-editor-area"),d=tinymce.editors[a(this).data("id")],e=a('<textarea type="text" name="'+c.attr("name")+'"></textarea>'),f=a(this).find(".wp-editor-wrap");b=d?d.getContent():c.val(),e.val(b).hide(),f.before('<p class="description">Please Update or Save Draft to edit this content.</p>'),f.replaceWith(e)})}a(document).on("rbm-repeater-list-update",b),a(document).on("rbm-repeater-add",b)}(jQuery);
//# sourceMappingURL=rbm-field-helpers-admin.js.map